<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  margin: 0;
}

path {
  fill: none;
  stroke: #000;
  stroke-linejoin: round;
  stroke-linecap: round;
}

.major_road { stroke: #776; }
.minor_road { stroke: #ccb; }
.highway { stroke: #f39; stroke-width: 1.5px; }
.rail { stroke: #7de; }

</style>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script>(window.jQuery || document.write('<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"><\/script>'));</script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/d3.geo.tile.v0.min.js"></script>
<script>

var width = Math.max(960, window.innerWidth),
    height = Math.max(500, window.innerHeight);

var tiler = d3.geo.tile()
    .size([width, height]);

var projection = d3.geo.mercator()
    .center([-122.4521495,47.249365])
    .scale((1 << 21) / 2 / Math.PI)
    .translate([width / 2, height / 2]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var path = d3.geo.path()
				.projection(projection)
				
var d3line2 = d3.svg.line()
	.x(function(d){return projection(d)[0];})
	.y(function(d){return projection(d)[1];})
	.interpolate("linear"); 

roads = ["./WA_EdgeGeometry_trim_0.txt","./WA_EdgeGeometry_trim_1.txt","./WA_EdgeGeometry_trim_2.txt",
			  "./WA_EdgeGeometry_trim_3.txt","./WA_EdgeGeometry_trim_4.txt","./WA_EdgeGeometry_trim_5.txt",
			  "./WA_EdgeGeometry_trim_6.txt","./WA_EdgeGeometry_trim_7.txt","./WA_EdgeGeometry_trim_8.txt"]
			  
var rnames = [];
for(var id = 0, _len = roads.length; id < _len; id++){
	$.get(roads[id],  function (data) {
			var lines = data.split("\n");
			for (var i = 0, len = lines.length; i < len; i++) {
				var row = lines[i].split("^");
				var edgelabel = "a".concat(row[0]);
				row.splice(0,4);
				var links = [];
				for(var b=0, leng=row.length/2; b<leng; b++){
							links[b] = [row[b*2+1], row[b*2] ];
				}
			rnames.push(edgelabel);
			svg.append("path")
				.attr("d",d3line2(links))
				.attr("class", edgelabel)
				.attr("stroke", "black")
				.attr("stroke-width", "1px")
				.attr("shape-rendering", "auto")
				.attr("fill", "none");
			}
	});
}

var rlen = 0;
function your_func() {
	if (rlen < rnames.length) {
		svg.select(".".concat(rnames[rlen])).style("stroke", "red");
		rlen++;
	}
}
setInterval(function() { your_func(); }, 1);
/*var projectedCoordinates = [];

$.get("./WA_Nodes_trim.txt",  function (data) {
			var lines = data.split("\n");
			for (var i = 0, len = lines.length; i < len; i++) {
				var row = lines[i].split(" ");
				projectedCoordinates[i] = projection([row[2], row[1]]);
			}
			svg.selectAll("circle")
				.data(projectedCoordinates)
				.enter()
				.append("circle")
				.attr("r",2)
				.style("fill", "red")
				.attr("cx", function(d){ return d[0]; })
				.attr("cy", function(d){ return d[1]; });
});
*/


</script>